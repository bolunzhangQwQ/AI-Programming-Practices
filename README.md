# A Path Simulator Focusing on Time Consumption
基于上海交通网络和公共交通车辆数据的路径模拟程序，旨在模拟任意时间的交通状况，并找到最节省时间的路线。

## 项目摘要
本项目旨在构建一个交通导航模拟系统，能够返回最小化时间消耗和最佳路线，以帮助人们更有效地规划日常通勤。

## 关键技术与工具
- **OS模块**：提供Python程序与操作系统之间的接口。
- **NumPy**：用于处理多维数组的库。
- **Pandas**：数据分析工具，源自NumPy。
- **Osm2gmns**：简化网络并自动构建模块。
- **OSMnx**：基于geopandas、network和matplotlib的包。
- **Datetime**：处理时间相关模块。
- **Shapely**：执行平面特征的集合论分析和操作。
- **GC**：代际垃圾回收，减少内存使用，加速程序。

## 项目结构
1. **数据获取**：从上海公共数据更新平台获取出租车数据和路网数据。
2. **数据处理**：简化路网，处理轨迹大数据集，计算每条边的时间消耗。
3. **地图构建**：使用OSMnx生成街道数据和可视化结果。
4. **图算法应用与比较**：选择并比较不同的最短路径算法。

## 个人贡献 - 张博伦 (Zhang Bolun)
### 路网数据处理 (Road Data Processing)
- 使用OSMnx工具获取上海的路网数据，并成功将其转换成NetworkX可以处理的图结构。
- 基于计算能力和测试成本的考量，确定了以上海交通大学闵行校区为中心，10公里范围内作为测试导航范围。

### 权重调整 (Weight Adjustment)
- 通过多次调整观察和比较测试，确定了无数据参考下的平均道路速度为11.11m/s，这与实际情况最为吻合。
- 对比了不同平均速度计算方法对结果准确性的影响，包括整个路段的相同平均速度、每段分别计算的平均速度、每段加权平均速度、去除零速度数据后的每段平均速度，以及对零速度数据进行“惩罚”后的平均速度。最终确定了“去除零速度数据并分别计算每段的平均速度”的方法最为优化。

### 最短路径算法选择 (Shortest Path Algorithm Selection)
- 提出了使用Dijkstra算法的建议，并参与了与蚁群算法、A*算法和BFS算法的对比实验。
- 根据处理速度和处理精度的评分，Dijkstra算法以最高分被选为最终的最短路径算法。

### 准确性评估 (Accuracy Evaluation)
- 调用高德地图接口，将我们的输出路线和时间与市场上现有的导航软件进行比较，确保路线一致性，并认为时间差异在三分钟以内是可接受的。

### 可视化 (Visualization)
- 调用OpenStreetMap，输出路网图、最短路径图、参数图理论图，并展示最短时间。

### 程序运行与测试 (Program Running and Testing)
- 负责程序的运行和测试，确保算法的稳定性和效率。

## 项目流程
1. **数据获取**：下载上海公共数据更新平台的出租车数据和路网数据。
2. **数据处理**：简化路网，处理出租车数据，计算每条边的时间消耗。
3. **地图构建**：使用OSMnx获取街道数据并进行可视化。
4. **图算法应用**：应用并比较不同的图算法，如蚁群算法和Dijkstra算法。

## 结果分析
通过与高德导航应用的比较，我们的程序在路线一致性和时间差异上表现良好。

## 项目局限性
- 出租车数据无法完全反映道路状况和通勤时间。
- 判断标准需要更贴近现实，更具体。

## 存在的问题与改进
- **现实关联性**：简化程序无法判断道路是否适合大多数驾驶员使用。
- **时间消耗**：程序运行时间过长，需要进一步优化。

## 联系方式
- 项目负责人：张博伦 zbl15947161883@sjtu.edu.cn


**Please refer to the PDF report for details of the project introduction.**
